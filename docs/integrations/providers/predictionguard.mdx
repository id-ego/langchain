---
description: 이 문서는 LangChain 내 Prediction Guard 생태계 사용 방법을 다루며, 설치, 설정 및 LLM 래퍼에 대한
  참조를 포함합니다.
---

# 예측 가드

이 페이지에서는 LangChain 내에서 예측 가드 생태계를 사용하는 방법을 다룹니다. 설치 및 설정과 특정 예측 가드 래퍼에 대한 참조로 두 부분으로 나뉩니다.

## 설치 및 설정
- `pip install predictionguard`로 Python SDK를 설치합니다.
- 예측 가드 액세스 토큰을 얻고(자세한 내용은 [여기](https://docs.predictionguard.com/) 참조) 이를 환경 변수(`PREDICTIONGUARD_TOKEN`)로 설정합니다.

## LLM 래퍼

예측 가드 LLM 래퍼가 존재하며, 다음을 통해 접근할 수 있습니다.
```python
<!--IMPORTS:[{"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}]-->
from langchain_community.llms import PredictionGuard
```


LLM을 초기화할 때 예측 가드 모델의 이름을 인수로 제공할 수 있습니다:
```python
pgllm = PredictionGuard(model="MPT-7B-Instruct")
```


액세스 토큰을 직접 인수로 제공할 수도 있습니다:
```python
pgllm = PredictionGuard(model="MPT-7B-Instruct", token="<your access token>")
```


마지막으로, LLM의 출력을 구조화/제어하는 데 사용되는 "output" 인수를 제공할 수 있습니다:
```python
pgllm = PredictionGuard(model="MPT-7B-Instruct", output={"type": "boolean"})
```


## 사용 예시

제어되거나 보호된 LLM 래퍼의 기본 사용법:
```python
<!--IMPORTS:[{"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}, {"imported": "PromptTemplate", "source": "langchain_core.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html", "title": "Prediction Guard"}, {"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Prediction Guard"}]-->
import os

import predictionguard as pg
from langchain_community.llms import PredictionGuard
from langchain_core.prompts import PromptTemplate
from langchain.chains import LLMChain

# Your Prediction Guard API key. Get one at predictionguard.com
os.environ["PREDICTIONGUARD_TOKEN"] = "<your Prediction Guard access token>"

# Define a prompt template
template = """Respond to the following query based on the context.

Context: EVERY comment, DM + email suggestion has led us to this EXCITING announcement! 🎉 We have officially added TWO new candle subscription box options! 📦
Exclusive Candle Box - $80 
Monthly Candle Box - $45 (NEW!)
Scent of The Month Box - $28 (NEW!)
Head to stories to get ALL the deets on each box! 👆 BONUS: Save 50% on your first box with code 50OFF! 🎉

Query: {query}

Result: """
prompt = PromptTemplate.from_template(template)

# With "guarding" or controlling the output of the LLM. See the 
# Prediction Guard docs (https://docs.predictionguard.com) to learn how to 
# control the output with integer, float, boolean, JSON, and other types and
# structures.
pgllm = PredictionGuard(model="MPT-7B-Instruct", 
                        output={
                                "type": "categorical",
                                "categories": [
                                    "product announcement", 
                                    "apology", 
                                    "relational"
                                    ]
                                })
pgllm(prompt.format(query="What kind of post is this?"))
```


예측 가드 래퍼를 사용한 기본 LLM 체이닝:
```python
<!--IMPORTS:[{"imported": "PromptTemplate", "source": "langchain_core.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html", "title": "Prediction Guard"}, {"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Prediction Guard"}, {"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}]-->
import os

from langchain_core.prompts import PromptTemplate
from langchain.chains import LLMChain
from langchain_community.llms import PredictionGuard

# Optional, add your OpenAI API Key. This is optional, as Prediction Guard allows
# you to access all the latest open access models (see https://docs.predictionguard.com)
os.environ["OPENAI_API_KEY"] = "<your OpenAI api key>"

# Your Prediction Guard API key. Get one at predictionguard.com
os.environ["PREDICTIONGUARD_TOKEN"] = "<your Prediction Guard access token>"

pgllm = PredictionGuard(model="OpenAI-gpt-3.5-turbo-instruct")

template = """Question: {question}

Answer: Let's think step by step."""
prompt = PromptTemplate.from_template(template)
llm_chain = LLMChain(prompt=prompt, llm=pgllm, verbose=True)

question = "What NFL team won the Super Bowl in the year Justin Beiber was born?"

llm_chain.predict(question=question)
```