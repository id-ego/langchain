---
description: LangChain에 통합 기여 방법에 대한 안내로, 커뮤니티 패키지와 파트너 패키지에 대한 정보를 제공합니다.
sidebar_position: 5
---

# 통합 기여하기

시작하려면 [코드 기여하기](/docs/contributing/code/) 가이드에 설명된 모든 의존성이 설치되어 있는지 확인하세요.

LangChain에 통합 기여를 할 수 있는 몇 가지 장소가 있습니다:

- **커뮤니티**: 주로 LangChain과 오픈 소스 커뮤니티에 의해 유지되는 가벼운 통합을 위한 것입니다.
- **파트너 패키지**: LangChain과 파트너가 공동으로 유지하는 독립 패키지를 위한 것입니다.

대부분의 경우, **새로운 통합은 커뮤니티 패키지에 추가되어야 합니다**. 파트너 패키지는 별도의 패키지로서 더 많은 유지 관리가 필요하므로, 새로운 파트너 패키지를 생성하기 전에 LangChain 팀에 확인해 주세요.

다음 섹션에서는 가상의 회사인 `Parrot Link AI`에서 각 패키지에 기여하는 방법을 안내합니다.

## 커뮤니티 패키지

`langchain-community` 패키지는 `libs/community`에 있으며 대부분의 통합을 포함하고 있습니다.

`pip install langchain-community`로 설치할 수 있으며, 내보낸 멤버는 다음과 같은 코드로 가져올 수 있습니다.

```python
from langchain_community.chat_models import ChatParrotLink
from langchain_community.llms import ParrotLinkLLM
from langchain_community.vectorstores import ParrotLinkVectorStore
```


`community` 패키지는 수동으로 설치된 의존 패키지에 의존하므로, 설치되지 않은 패키지를 가져오려고 하면 오류가 발생합니다. 우리의 가상의 예에서 `parrot-link-sdk`를 설치하지 않고 `ParrotLinkLLM`을 가져오려고 하면, 이를 설치하라는 `ImportError`가 표시됩니다.

Parrot Link AI를 위한 채팅 모델을 구현하고 싶다고 가정해 봅시다. 다음 코드를 가진 새 파일을 `libs/community/langchain_community/chat_models/parrot_link.py`에 생성합니다:

```python
<!--IMPORTS:[{"imported": "BaseChatModel", "source": "langchain_core.language_models.chat_models", "docs": "https://api.python.langchain.com/en/latest/language_models/langchain_core.language_models.chat_models.BaseChatModel.html", "title": "Contribute Integrations"}]-->
from langchain_core.language_models.chat_models import BaseChatModel

class ChatParrotLink(BaseChatModel):
    """ChatParrotLink chat model.

    Example:
        .. code-block:: python

            from langchain_community.chat_models import ChatParrotLink

            model = ChatParrotLink()
    """

    ...
```


그리고 다음 위치에 테스트를 작성합니다:

- 단위 테스트: `libs/community/tests/unit_tests/chat_models/test_parrot_link.py`
- 통합 테스트: `libs/community/tests/integration_tests/chat_models/test_parrot_link.py`

그리고 문서를 다음에 추가합니다:

- `docs/docs/integrations/chat/parrot_link.ipynb`

## LangChain 레포의 파트너 패키지

:::caution
**파트너** 패키지를 시작하기 전에 LangChain 팀에 의도를 확인해 주세요. 파트너 패키지는 별도의 패키지로서 더 많은 유지 관리가 필요하므로, 사전 논의 없이 새로운 파트너 패키지를 추가하는 PR은 닫을 것입니다. 커뮤니티 통합을 추가하는 방법에 대한 내용은 위 섹션을 참조하세요.
:::

파트너 패키지는 `LangChain` 모노레포 또는 외부 레포에 호스팅될 수 있습니다.

`LangChain` 레포의 파트너 패키지는 `libs/partners/{partner}`에 위치하며, 패키지 소스 코드는 `libs/partners/{partner}/langchain_{partner}`에 있습니다.

사용자는 `pip install langchain-{partner}`로 패키지를 설치하며, 패키지 멤버는 다음과 같은 코드로 가져올 수 있습니다:

```python
from langchain_{partner} import X
```


### 새 패키지 설정하기

새 파트너 패키지를 설정하려면 LangChain CLI의 최신 버전을 사용하세요. 다음과 같이 설치하거나 업데이트할 수 있습니다:

```bash
pip install -U langchain-cli
```


Parrot Link AI라는 회사에 맞는 새로운 파트너 패키지를 만들고 싶다고 가정해 봅시다.

그런 다음, 다음 명령어를 실행하여 새 파트너 패키지를 생성합니다:

```bash
cd libs/partners
langchain-cli integration new
> Name: parrot-link
> Name of integration in PascalCase [ParrotLink]: ParrotLink
```


이렇게 하면 다음 구조를 가진 `libs/partners/parrot-link`에 새 패키지가 생성됩니다:

```
libs/partners/parrot-link/
  langchain_parrot_link/ # folder containing your package
    ...
  tests/
    ...
  docs/ # bootstrapped docs notebooks, must be moved to /docs in monorepo root
    ...
  scripts/ # scripts for CI
    ...
  LICENSE
  README.md # fill out with information about your package
  Makefile # default commands for CI
  pyproject.toml # package metadata, mostly managed by Poetry
  poetry.lock # package lockfile, managed by Poetry
  .gitignore
```


### 패키지 구현하기

먼저, 패키지에 필요한 의존성을 추가합니다. 예를 들어, 회사의 SDK와 같은 것입니다:

```bash
poetry add parrot-link-sdk
```


타입 검사를 위한 별도의 의존성이 필요한 경우, 다음과 같이 `typing` 그룹에 추가할 수 있습니다:

```bash
poetry add --group typing types-parrot-link-sdk
```


그런 다음, `libs/partners/parrot-link/langchain_parrot_link`에서 패키지를 구현합니다.

기본적으로, 여기에는 채팅 모델, LLM 및/또는 벡터 저장소에 대한 스텁이 포함됩니다. 사용하지 않을 파일은 삭제하고 `__init__.py`에서 제거해야 합니다.

### 단위 및 통합 테스트 작성하기

`tests/` 디렉토리에 일부 기본 테스트가 제공됩니다. 패키지의 기능을 커버하기 위해 더 많은 테스트를 추가해야 합니다.

테스트 실행 및 구현에 대한 정보는 [테스트 가이드](/docs/contributing/testing/)를 참조하세요.

### 문서 작성하기

문서는 `docs/` 디렉토리의 Jupyter 노트북에서 생성됩니다. 예제가 포함된 노트북을 모노레포 루트의 관련 `docs/docs/integrations` 디렉토리에 배치해야 합니다.

### (필요한 경우) 커뮤니티 통합 중단하기

참고: 이는 기존 커뮤니티 통합을 파트너 패키지로 마이그레이션하는 경우에만 필요합니다. 통합하는 구성 요소가 LangChain에 새로 추가된 것이라면(즉, `community` 패키지에 이미 포함되지 않은 경우) 이 단계를 건너뛸 수 있습니다.

커뮤니티 패키지에서 `ChatParrotLink` 채팅 모델을 파트너 패키지로 마이그레이션했다고 가정해 봅시다. 커뮤니티 패키지에서 이전 모델을 중단해야 합니다.

이를 위해 `libs/community/langchain_community/chat_models/parrot_link.py`에서 이전 모델에 `@deprecated` 데코레이터를 추가합니다.

변경 전 우리의 채팅 모델은 다음과 같을 수 있습니다:

```python
class ChatParrotLink(BaseChatModel):
  ...
```


변경 후에는 다음과 같이 보일 것입니다:

```python
<!--IMPORTS:[{"imported": "deprecated", "source": "langchain_core._api.deprecation", "docs": "https://api.python.langchain.com/en/latest/_api/langchain_core._api.deprecation.deprecated.html", "title": "Contribute Integrations"}]-->
from langchain_core._api.deprecation import deprecated

@deprecated(
    since="0.0.<next community version>", 
    removal="0.2.0", 
    alternative_import="langchain_parrot_link.ChatParrotLink"
)
class ChatParrotLink(BaseChatModel):
  ...
```


파트너 패키지로 마이그레이션하는 각 구성 요소에 대해 이 작업을 수행해야 합니다.

### 추가 단계

기여자 단계:

- [ ] `.github/workflows/_integration_test.yml`의 수동 통합 워크플로우에 비밀 이름 추가
- [ ] `.github/workflows/_release.yml`의 릴리스 워크플로우에 비밀 추가 (사전 릴리스 테스트용)

유지 관리 단계 (기여자는 **하지 않아야** 함):

- [ ] pypi 및 test pypi 프로젝트 설정
- [ ] Github Actions에 자격 증명 비밀 추가
- [ ] conda-forge에 패키지 추가

## 외부 레포의 파트너 패키지

외부 레포의 파트너 패키지는 LangChain 팀과 파트너 조직 간의 조정이 필요하여 유지 관리 및 업데이트가 보장됩니다.

외부 레포에 파트너 패키지를 생성하는 데 관심이 있다면, 먼저 LangChain 레포에서 하나를 시작한 후 LangChain 팀에 연락하여 외부 레포로 이동하는 방법을 논의하세요.