---
description: 이 문서는 LangChain v0.2로의 업그레이드를 위한 가이드를 제공하며, 주요 변경 사항 및 이전 버전에서의 마이그레이션
  방법을 설명합니다.
sidebar_position: 1
---

# LangChain v0.2로의 마이그레이션

LangChain v0.2는 2024년 5월에 출시되었습니다. 이 릴리스에는 여러 가지 [파괴적인 변경 사항 및 사용 중단](/docs/versions/v0_2/deprecations)이 포함되어 있습니다. 이 문서는 0.2.x로 업그레이드하는 방법에 대한 가이드를 포함하고 있습니다.

:::note 참고

- [파괴적인 변경 사항 및 사용 중단](/docs/versions/v0_2/deprecations)
- [레거시 체인을 LCEL로 마이그레이션하기](/docs/versions/migrating_chains)
- [Astream Events v2로 마이그레이션하기](/docs/versions/v0_2/migrating_astream_events)

:::

# 마이그레이션

이 문서는 코드를 LangChain `0.2.x`로 업그레이드하는 데 도움을 줄 것입니다. 마이그레이션을 준비하기 위해 먼저 다음 단계를 수행하는 것을 권장합니다:

1. langchain-core, langchain의 0.2.x 버전을 설치하고, 사용 중인 다른 패키지의 최신 버전으로 업그레이드합니다. (예: langgraph, langchain-community, langchain-openai 등)
2. 새로운 패키지로 코드가 제대로 실행되는지 확인합니다 (예: 단위 테스트가 통과).
3. 최신 버전의 `langchain-cli`를 설치하고, 도구를 사용하여 코드에서 사용된 이전 import를 새로운 import로 교체합니다. (아래 지침 참조.)
4. 남아 있는 사용 중단 경고를 수동으로 해결합니다.
5. 단위 테스트를 다시 실행합니다.
6. `astream_events`를 사용 중인 경우, [astream events v2로 마이그레이션하는 방법](/docs/versions/v0_2/migrating_astream_events)을 검토하십시오.

## 새로운 import로 업그레이드

코드를 마이그레이션하는 데 도움을 주기 위해 도구를 만들었습니다. 이 도구는 여전히 **베타** 상태이며 모든 경우를 다루지 않을 수 있지만,
코드를 더 빠르게 마이그레이션하는 데 도움이 되기를 바랍니다.

마이그레이션 스크립트에는 다음과 같은 제한 사항이 있습니다:

1. 이전 import에서 새로운 import로 이동하는 데만 도움을 줍니다. 다른 사용 중단 문제를 해결하지 않습니다.
2. `as`가 포함된 import는 처리할 수 없습니다.
3. 새로운 import는 항상 전역 범위에 배치되며, 교체된 이전 import가 일부 지역 범위(예: 함수 본문) 내에 있던 경우에도 마찬가지입니다.
4. 일부 사용 중단된 import를 놓칠 가능성이 있습니다.

다음은 마이그레이션 스크립트가 자동으로 적용할 수 있는 import 변경 사항의 예입니다:

| 패키지에서         | 패키지로               | 사용 중단된 import                                               | 새로운 import                                                       |
|---------------------|--------------------------|-------------------------------------------------------------------|---------------------------------------------------------------------|
| langchain           | langchain-community      | from langchain.vectorstores import InMemoryVectorStore            | from langchain_community.vectorstores import InMemoryVectorStore     |
| langchain-community | langchain_openai         | from langchain_community.chat_models import ChatOpenAI            | from langchain_openai import ChatOpenAI                              |
| langchain-community | langchain-core           | from langchain_community.document_loaders import Blob             | from langchain_core.document_loaders import Blob                     |
| langchain           | langchain-core           | from langchain.schema.document import Document                    | from langchain_core.documents import Document                        |
| langchain           | langchain-text-splitters | from langchain.text_splitter import RecursiveCharacterTextSplitter | from langchain_text_splitters import RecursiveCharacterTextSplitter  |

## 설치

```bash
pip install langchain-cli
langchain-cli --version # <-- Make sure the version is at least 0.0.22
```


## 사용법

마이그레이션 스크립트가 완벽하지 않으므로 먼저 코드의 백업을 만들어야 합니다 (예: `git`과 같은 버전 관리 사용).

마이그레이션 스크립트를 **두 번** 실행해야 합니다. 한 번의 실행에서 하나의 import 교체만 적용되기 때문입니다.

예를 들어, 코드가 여전히 `from langchain.chat_models import ChatOpenAI`를 사용한다고 가정해 보겠습니다:

첫 번째 실행 후, 다음과 같이 됩니다: `from langchain_community.chat_models import ChatOpenAI`
두 번째 실행 후, 다음과 같이 됩니다: `from langchain_openai import ChatOpenAI`

```bash
# Run a first time
# Will replace from langchain.chat_models import ChatOpenAI
langchain-cli migrate --diff [path to code] # Preview
langchain-cli migrate [path to code] # Apply

# Run a second time to apply more import replacements
langchain-cli migrate --diff [path to code] # Preview
langchain-cli migrate [path to code] # Apply
```


### 기타 옵션

```bash
# See help menu
langchain-cli migrate --help
# Preview Changes without applying
langchain-cli migrate --diff [path to code]
# Run on code including ipython notebooks
# Apply all import updates except for updates from langchain to langchain-core
langchain-cli migrate --disable langchain_to_core --include-ipynb [path to code]
```